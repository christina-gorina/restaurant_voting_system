/*C6*/SET SCHEMA PUBLIC
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DROP TABLE dishes IF EXISTS
DROP TABLE restaurants IF EXISTS CASCADE
DROP TABLE votes IF EXISTS CASCADE
DROP TABLE users IF EXISTS
DROP SEQUENCE global_seq IF EXISTS CASCADE
CREATE SEQUENCE GLOBAL_SEQ AS INTEGER START WITH 100000
CREATE TABLE users ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL )
CREATE TABLE restaurants ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE dishes ( id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY, name VARCHAR(255) NOT NULL, price INTEGER NOT NULL, date DATE NOT NULL, restaurant INTEGER NOT NULL, FOREIGN KEY (restaurant) REFERENCES restaurants (id) ON DELETE CASCADE )
CREATE TABLE votes( restaurant INTEGER NOT NULL, user INTEGER NOT NULL, date_time TIMESTAMP NOT NULL, FOREIGN KEY (restaurant) REFERENCES restaurants (id) ON DELETE CASCADE, FOREIGN KEY (user) REFERENCES users (id) ON DELETE CASCADE )
ALTER SEQUENCE global_seq RESTART WITH 100000
INSERT INTO USERS VALUES(100000,'User','user@gmail.com')
INSERT INTO USERS VALUES(100001,'Admin','admin@gmail.com')
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100002
COMMIT
INSERT INTO RESTAURANTS VALUES(100002,'\u0418\u0442\u0430\u043b\u044c\u044f\u043d\u0441\u043a\u0438\u0439 \u0440\u0435\u0441\u0442\u043e\u0440\u0430\u043d')
INSERT INTO RESTAURANTS VALUES(100003,'\u0421\u0443\u0448\u0438 \u0431\u0430\u0440')
INSERT INTO RESTAURANTS VALUES(100004,'\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0440\u0435\u0441\u0442\u043e\u0440\u0430\u043d')
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100005
COMMIT
INSERT INTO DISHES VALUES(100005,'\u041f\u0430\u0441\u0442\u0430',890,'2020-07-04',100003)
INSERT INTO DISHES VALUES(100006,'\u0421\u043f\u0430\u0433\u0435\u0442\u0442\u0438',486,'2020-07-03',100003)
INSERT INTO DISHES VALUES(100007,'\u041f\u0438\u0446\u0446\u0430',562,'2020-07-04',100003)
INSERT INTO DISHES VALUES(100008,'\u041b\u0430\u0437\u0430\u043d\u044c\u044f',740,'2020-07-03',100003)
INSERT INTO DISHES VALUES(100009,'\u0420\u043e\u043b\u043b\u044b \u043a\u0430\u043b\u0438\u0444\u043e\u0440\u043d\u0438\u044f',430,'2020-07-05',100002)
INSERT INTO DISHES VALUES(100010,'\u0421\u0443\u0448\u0438 \u0441 \u0442\u0443\u043d\u0446\u043e\u043c',490,'2020-07-05',100002)
INSERT INTO DISHES VALUES(100011,'\u0421\u0430\u0448\u0438\u043c\u0438',640,'2020-07-07',100002)
INSERT INTO DISHES VALUES(100012,'\u0421\u044f\u043a\u0435',620,'2020-07-05',100002)
INSERT INTO DISHES VALUES(100013,'\u041b\u0430\u043f\u0448\u0430',730,'2020-07-05',100003)
INSERT INTO DISHES VALUES(100014,'\u0423\u0442\u0440\u0430 \u043f\u043e \u043f\u0435\u043a\u0438\u043d\u0441\u043a\u0438',1500,'2020-07-04',100003)
INSERT INTO DISHES VALUES(100015,'\u0414\u0438\u043c\u0441\u0430\u043c\u044b',350,'2020-07-04',100003)
INSERT INTO DISHES VALUES(100016,'\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0441\u0443\u043f',520,'2020-07-05',100003)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100017
COMMIT
INSERT INTO VOTES VALUES(100003,100000,'2020-07-07 10:00:00.000000')
INSERT INTO VOTES VALUES(100002,100001,'2020-07-07 10:00:00.000000')
INSERT INTO VOTES VALUES(100002,100000,'2020-07-07 10:00:00.000000')
INSERT INTO VOTES VALUES(100004,100001,'2020-07-07 12:00:00.000000')
COMMIT
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
